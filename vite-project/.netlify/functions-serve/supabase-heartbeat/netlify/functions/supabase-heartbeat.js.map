{
  "version": 3,
  "sources": ["../../../../../../../Users/nicnat/Projects/traverdecoraciontextil/vite-project/netlify/functions/supabase-heartbeat.js"],
  "sourceRoot": "/private/var/folders/8f/3rn3yv2d23l5nml9jvqwg7280000gn/T/tmp-46531-oB4eQPEwl7FW",
  "sourcesContent": ["export async function handler() {\n  try {\n    const SUPABASE_URL = process.env.SUPABASE_URL;\n    const SUPABASE_ANON_KEY = process.env.SUPABASE_ANON_KEY;\n\n    if (!SUPABASE_URL || !SUPABASE_ANON_KEY) {\n      return {\n        statusCode: 500,\n        body: \"Missing SUPABASE_URL or SUPABASE_ANON_KEY env vars\",\n      };\n    }\n\n    // PATCH heartbeat row (counts as DB activity)\n    const res = await fetch(`${SUPABASE_URL}/rest/v1/heartbeat?id=eq.1`, {\n      method: \"PATCH\",\n      headers: {\n        apikey: SUPABASE_ANON_KEY,\n        Authorization: `Bearer ${SUPABASE_ANON_KEY}`,\n        \"Content-Type\": \"application/json\",\n        Prefer: \"return=minimal\",\n      },\n      body: JSON.stringify({ updated_at: new Date().toISOString() }),\n    });\n\n    if (!res.ok) {\n      const text = await res.text();\n      return {\n        statusCode: 500,\n        body: `Heartbeat failed: ${text}`,\n      };\n    }\n\n    return { statusCode: 200, body: \"Heartbeat OK\" };\n  } catch (err) {\n    return {\n      statusCode: 500,\n      body: `Heartbeat error: ${err?.message || \"unknown\"}`,\n    };\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eAAsB,UAAU;AAC9B,MAAI;AACF,UAAM,eAAe,QAAQ,IAAI;AACjC,UAAM,oBAAoB,QAAQ,IAAI;AAEtC,QAAI,CAAC,gBAAgB,CAAC,mBAAmB;AACvC,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM;AAAA,MACR;AAAA,IACF;AAGA,UAAM,MAAM,MAAM,MAAM,GAAG,YAAY,8BAA8B;AAAA,MACnE,QAAQ;AAAA,MACR,SAAS;AAAA,QACP,QAAQ;AAAA,QACR,eAAe,UAAU,iBAAiB;AAAA,QAC1C,gBAAgB;AAAA,QAChB,QAAQ;AAAA,MACV;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,aAAY,oBAAI,KAAK,GAAE,YAAY,EAAE,CAAC;AAAA,IAC/D,CAAC;AAED,QAAI,CAAC,IAAI,IAAI;AACX,YAAM,OAAO,MAAM,IAAI,KAAK;AAC5B,aAAO;AAAA,QACL,YAAY;AAAA,QACZ,MAAM,qBAAqB,IAAI;AAAA,MACjC;AAAA,IACF;AAEA,WAAO,EAAE,YAAY,KAAK,MAAM,eAAe;AAAA,EACjD,SAAS,KAAK;AACZ,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,MAAM,oBAAoB,KAAK,WAAW,SAAS;AAAA,IACrD;AAAA,EACF;AACF;",
  "names": []
}
